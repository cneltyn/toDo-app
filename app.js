!function(){"use strict";function o(o,t){t.otherwise("/todos"),o.state("todos",{url:"/todos",template:'<todos todos="$resolve.todos"></todos>',resolve:{todos:["ToDoService",function(o){return o.getTodos()}]}}).state("todos.create",{url:"/create",template:'<create todos="$resolve.todos"></create>',resolve:{todos:["ToDoService",function(o){return o.getTodos()}]}}).state("todos.edit",{url:"/edit/:id",template:"<edit todo=$resolve.todo></edit>",resolve:{todo:["$stateParams","ToDoService",function(o,t){return t.find(o.id)}]}})}o.$inject=["$stateProvider","$urlRouterProvider"],angular.module("todoApp",["ui.router","todoApp.components","todoApp.services","ngMaterial"]).config(o)}(),function(){"use strict";angular.module("todoApp.components",[])}(),function(){"use strict";angular.module("todoApp.services",[])}(),function(){"use strict";function o(){var o=this;o.appTitle="Do or do not, there is no try",o.saved=localStorage.getItem("todos"),o.todos=null!==localStorage.getItem("todos")?JSON.parse(o.saved):[{id:0,text:"Learn AngularJS",done:!1},{id:1,text:"Build an Angular app",done:!1}],localStorage.setItem("todos",JSON.stringify(o.todos)),o.getTodos=function(){return o.todos},o.find=function(t){var e=o.todos.filter(function(o){return o.id===parseInt(t,10)});return e&&e[0]||null},o.getById=function(t){var e=o.todos.map(function(o){return o.id}).indexOf(t);return e!==-1&&e},o.getUnDo=function(){return o.todos=o.todos.filter(function(o){return o.done!==!0}),o.todos},o.remaining=function(){var t=0;return angular.forEach(o.todos,function(o){t+=o.done?0:1}),t},o.archive=function(){localStorage.setItem("todos",JSON.stringify(o.getUnDo()))},o.removeTodo=function(t){o.todos.splice(o.getById(t),1),localStorage.setItem("todos",JSON.stringify(o.todos))},o.addTodo=function(t){var e=null;e=o.todos.length>0?o.todos[o.todos.length-1].id:-1,o.todos.push({id:e+=1,text:t,done:!1}),localStorage.setItem("todos",JSON.stringify(o.todos))},o.editTodo=function(){localStorage.setItem("todos",JSON.stringify(o.todos))}}angular.module("todoApp.services").service("ToDoService",o)}(),function(){"use strict";function o(){function o(o,t,e,n){function r(o){n.$setViewValue(o.target.result),n.$render()}function d(o){var t=new FileReader;null!==o&&o.preventDefault(),t.onload=r,t.readAsText(o.dataTransfer.files[0])}var i;i=function(o){return null!==o&&o.preventDefault(),o.dataTransfer.effectAllowed="copy",!1},t.bind("dragover",i),t.bind("dragenter",i),t.bind("drop",d)}return{restrict:"EA",require:"ngModel",link:o}}angular.module("todoApp.components").directive("drag",o)}(),function(){"use strict";function o(o,t){var e=this;e.addTodo=function(){t.addTodo(e.todoText),o.go("todos")}}o.$inject=["$state","ToDoService"],angular.module("todoApp.components").component("create",{bindings:{todos:"<"},templateUrl:"components/create/todo-create.html",controller:o})}(),function(){"use strict";function o(o,t){var e=this;e.editTodo=function(){t.editTodo(),o.go("todos")}}o.$inject=["$state","ToDoService"],angular.module("todoApp.components").component("edit",{bindings:{todo:"<"},templateUrl:"components/edit/todo-edit.html",controller:o})}(),function(){"use strict";function o(){var o=this;o.date=Date.now()}angular.module("todoApp.components").component("footer",{templateUrl:"components/footer/footer.html",controller:o})}(),function(){"use strict";function o(o){var t=this;t.appTitle=o.appTitle,t.removeTodo=function(t){o.removeTodo(t)},t.remaining=function(){return o.remaining()},t.archive=function(){o.archive(),t.todos=o.getTodos()}}o.$inject=["ToDoService"],angular.module("todoApp.components").component("todos",{bindings:{todos:"<"},templateUrl:"components/list/todo-list.html",controller:o})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbXBvbmVudHMvX21vZHVsZS5qcyIsInNlcnZpY2VzL19tb2R1bGUuanMiLCJzZXJ2aWNlcy90b2RvLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL2NyZWF0ZS90b2RvLWNyZWF0ZS1kcm9wLmpzIiwiY29tcG9uZW50cy9jcmVhdGUvdG9kby1jcmVhdGUuanMiLCJjb21wb25lbnRzL2VkaXQvdG9kby1lZGl0LmpzIiwiY29tcG9uZW50cy9mb290ZXIvZm9vdGVyLmpzIiwiY29tcG9uZW50cy9saXN0L3RvZG8tbGlzdC5qcyJdLCJuYW1lcyI6WyJyb3V0aW5nIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlIiwicmVzb2x2ZSIsInRvZG9zIiwiVG9Eb1NlcnZpY2UiLCJnZXRUb2RvcyIsInRvZG8iLCIkc3RhdGVQYXJhbXMiLCJmaW5kIiwiaWQiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwic2VsZiIsInRoaXMiLCJhcHBUaXRsZSIsInNhdmVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsInRleHQiLCJkb25lIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImZpbHRlciIsInRvRG8iLCJwYXJzZUludCIsImdldEJ5SWQiLCJpbmRleCIsIm1hcCIsImVsZW1lbnQiLCJpbmRleE9mIiwiZ2V0VW5EbyIsInJlbWFpbmluZyIsImNvdW50IiwiZm9yRWFjaCIsImFyY2hpdmUiLCJyZW1vdmVUb2RvIiwic3BsaWNlIiwiYWRkVG9kbyIsInRvZG9UZXh0IiwidG1wIiwibGVuZ3RoIiwicHVzaCIsImVkaXRUb2RvIiwic2VydmljZSIsImRyYWciLCJsaW5rIiwic2NvcGUiLCJhdHRycyIsIm5nTW9kZWxDdHJsIiwiaW5zZXJ0VGV4dCIsImxvYWRlZEZpbGUiLCIkc2V0Vmlld1ZhbHVlIiwidGFyZ2V0IiwicmVzdWx0IiwiJHJlbmRlciIsImhhbmRsZURyb3BFdmVudCIsImV2ZW50IiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInByZXZlbnREZWZhdWx0Iiwib25sb2FkIiwicmVhZEFzVGV4dCIsImRhdGFUcmFuc2ZlciIsImZpbGVzIiwicHJvY2Vzc0RyYWdPdmVyT3JFbnRlciIsImVmZmVjdEFsbG93ZWQiLCJiaW5kIiwicmVzdHJpY3QiLCJyZXF1aXJlIiwiZGlyZWN0aXZlIiwiVG9kb0NyZWF0ZUNvbnRyb2xsZXIiLCIkc3RhdGUiLCJnbyIsImNvbXBvbmVudCIsImJpbmRpbmdzIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiVG9kb0VkaXRDb250cm9sbGVyIiwiVG9kb0Zvb3RlciIsImRhdGUiLCJEYXRlIiwibm93IiwiVG9kb0xpc3RDb250cm9sbGVyIl0sIm1hcHBpbmdzIjoiQ0FBRSxXQUNGLFlBSUEsU0FBQUEsR0FBQUMsRUFBQUMsR0FDQUEsRUFBQUMsVUFBQSxVQUNBRixFQUNBRyxNQUFBLFNBSEFDLElBQUEsU0FLQUMsU0FBQSx5Q0FDQUMsU0FDQUMsT0FBQSxjQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsZ0JBSUFOLE1BQUEsZ0JBQ0FDLElBQUEsVUFDQUMsU0FBQSwyQ0FDQUMsU0FDQUMsT0FBQSxjQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsZ0JBSUFOLE1BQUEsY0FDQUMsSUFBQSxZQUNBQyxTQUFBLG1DQUNBQyxTQUNBSSxNQUFBLGVBQUEsY0FBQSxTQUFBQyxFQUFBSCxHQUNBLE1BQUFBLEdBQUFJLEtBQUFELEVBQUFFLDJEQS9CQUMsUUFBQUMsT0FBQSxXQUNBLFlBQUEscUJBQUEsbUJBQUEsZUFFQUMsT0FBQWpCLE1Bc0NFLFdBQUYsWUN6Q0FlLFNBQUFDLE9BQUEsNEJEK0NFLFdBQUYsWUUvQ0FELFNBQUFDLE9BQUEsMEJGcURFLFdBQUYsWUdsREEsU0FBQVAsS0FDQSxHQUFBUyxHQUFBQyxJQUVBRCxHQUFBRSxTQUFBLGdDQUNBRixFQUFBRyxNQUFBQyxhQUFBQyxRQUFBLFNBQ0FMLEVBQUFW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QTJFLFlBQUEscUNBQ0FDLFdBQUFOLE9McU1FLFdBQ0YsWU1uTUEsU0FBQU8sR0FBQU4sRUFBQXRFLEdBQ0EsR0FBQVMsR0FBQUMsSUFFQUQsR0FBQWdDLFNBQUEsV0FDQXpDLEVBQUF5QyxXQUNBNkIsRUFBQUMsR0FBQSw2Q0FkQWpFLFFBQUFDLE9BQUEsc0JBQ0FpRSxVQUFBLFFBQ0FDLFVBQ0F2RSxLQUFBLEtBRUF3RSxZQUFBLGlDQUNBQyxXQUFBQyxPTjJORSxXQUNGLFlPNU5BLFNBQUFDLEtBQ0EsR0FBQXBFLEdBQUFDLElBRUFELEdBQUFxRSxLQUFBQyxLQUFBQyxNQVRBMUUsUUFBQUMsT0FBQSxzQkFDQWlFLFVBQUEsVUFDQUUsWUFBQSxnQ0FDQUMsV0FBQUUsT1A4T0UsV0FDRixZUXpPQSxTQUFBSSxHQUFBakYsR0FDQSxHQUFBUyxHQUFBQyxJQUVBRCxHQUFBRSxTQUFBWCxFQUFBVyxTQUVBRixFQUFBeUIsV0FBQSxTQUFBN0IsR0FDQUwsRUFBQWtDLFdBQUE3QixJQUdBSSxFQUFBcUIsVUFBQSxXQUNBLE1BQUE5QixHQUFBOEIsYUFHQXJCLEVBQUF3QixRQUFBLFdBQ0FqQyxFQUFBaUMsVUFDQXhCLEVBQUFWLE1BQUFDLEVBQUFDLHNDQXhCQUssUUFBQUMsT0FBQSxzQkFDQWlFLFVBQUEsU0FDQUMsVUFDQTFFLE1BQUEsS0FFQTJFLFlBQUEsaUNBQ0FDLFdBQUFNIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24oKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoJ3RvZG9BcHAnLCBbXG4gICd1aS5yb3V0ZXInLCAndG9kb0FwcC5jb21wb25lbnRzJywgJ3RvZG9BcHAuc2VydmljZXMnLCAnbmdNYXRlcmlhbCdcbl0pXG4uY29uZmlnKHJvdXRpbmcpO1xuXG5mdW5jdGlvbiByb3V0aW5nKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL3RvZG9zJyk7XG4gICRzdGF0ZVByb3ZpZGVyXG4gICAgLnN0YXRlKCd0b2RvcycsIHtcbiAgICAgIHVybDogJy90b2RvcycsXG4gICAgICB0ZW1wbGF0ZTogJzx0b2RvcyB0b2Rvcz1cIiRyZXNvbHZlLnRvZG9zXCI+PC90b2Rvcz4nLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICB0b2RvczogZnVuY3Rpb24gKFRvRG9TZXJ2aWNlKSB7XG4gICAgICAgICAgcmV0dXJuIFRvRG9TZXJ2aWNlLmdldFRvZG9zKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgndG9kb3MuY3JlYXRlJywge1xuICAgICAgdXJsOiAnL2NyZWF0ZScsXG4gICAgICB0ZW1wbGF0ZTogJzxjcmVhdGUgdG9kb3M9XCIkcmVzb2x2ZS50b2Rvc1wiPjwvY3JlYXRlPicsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIHRvZG9zOiBmdW5jdGlvbiAoVG9Eb1NlcnZpY2UpIHtcbiAgICAgICAgICByZXR1cm4gVG9Eb1NlcnZpY2UuZ2V0VG9kb3MoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCd0b2Rvcy5lZGl0Jywge1xuICAgICAgdXJsOiAnL2VkaXQvOmlkJyxcbiAgICAgIHRlbXBsYXRlOiAnPGVkaXQgdG9kbz0kcmVzb2x2ZS50b2RvPjwvZWRpdD4nLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICB0b2RvOiBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zLCBUb0RvU2VydmljZSkge1xuICAgICAgICAgIHJldHVybiBUb0RvU2VydmljZS5maW5kKCRzdGF0ZVBhcmFtcy5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbn1cbn0oKSk7XG5cbjsoZnVuY3Rpb24oKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoJ3RvZG9BcHAuY29tcG9uZW50cycsIFtdKTtcbn0oKSk7XG5cbjsoZnVuY3Rpb24oKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoJ3RvZG9BcHAuc2VydmljZXMnLCBbXSk7XG59KCkpO1xuXG47KGZ1bmN0aW9uKCkge1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmFuZ3VsYXIubW9kdWxlKCd0b2RvQXBwLnNlcnZpY2VzJylcclxuICAgIC5zZXJ2aWNlKCdUb0RvU2VydmljZScsIFRvRG9TZXJ2aWNlKTtcclxuXHJcbmZ1bmN0aW9uIFRvRG9TZXJ2aWNlKCkge1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgc2VsZi5hcHBUaXRsZSA9ICdEbyBvciBkbyBub3QsIHRoZXJlIGlzIG5vIHRyeSc7XHJcbiAgc2VsZi5zYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvcycpO1xyXG4gIHNlbGYudG9kb3MgPSAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RvZG9zJykgIT09IG51bGwpID8gSlNPTi5wYXJzZShzZWxmLnNhdmVkKSA6XHJcbiAgICBbeyBpZDogMCwgdGV4dDogJ0xlYXJuIEFuZ3VsYXJKUycsIGRvbmU6IGZhbHNlIH0sXHJcbiAgICB7IGlkOiAxLCB0ZXh0OiAnQnVpbGQgYW4gQW5ndWxhciBhcHAnLCBkb25lOiBmYWxzZSB9XTtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCBKU09OLnN0cmluZ2lmeShzZWxmLnRvZG9zKSk7XHJcblxyXG4gIHNlbGYuZ2V0VG9kb3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gc2VsZi50b2RvcztcclxuICB9O1xyXG5cclxuICBzZWxmLmZpbmQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgIHZhciB0b2RvID0gc2VsZi50b2Rvcy5maWx0ZXIoZnVuY3Rpb24gKHRvRG8pIHtcclxuICAgICAgcmV0dXJuIHRvRG8uaWQgPT09IHBhcnNlSW50KGlkLCAxMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gKHRvZG8gJiYgdG9kb1swXSkgfHwgbnVsbDtcclxuICB9O1xyXG5cclxuICBzZWxmLmdldEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgIHZhciBpbmRleCA9IHNlbGYudG9kb3NcclxuICAgICAgLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gZWxlbWVudC5pZDsgfSlcclxuICAgICAgLmluZGV4T2YoaWQpO1xyXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5kZXg7XHJcbiAgfTtcclxuXHJcbiAgc2VsZi5nZXRVbkRvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgc2VsZi50b2RvcyA9IHNlbGYudG9kb3MuZmlsdGVyKGZ1bmN0aW9uICh0b2RvKSB7XHJcbiAgICAgIHJldHVybiB0b2RvLmRvbmUgIT09IHRydWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzZWxmLnRvZG9zO1xyXG4gIH07XHJcblxyXG4gIHNlbGYucmVtYWluaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGNvdW50ID0gMDtcclxuICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxmLnRvZG9zLCBmdW5jdGlvbiAodG9kbykge1xyXG4gICAgICBjb3VudCArPSB0b2RvLmRvbmUgPyAwIDogMTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNvdW50O1xyXG4gIH07XHJcblxyXG4gIHNlbGYuYXJjaGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KHNlbGYuZ2V0VW5EbygpKSk7XHJcbiAgfTtcclxuXHJcbiAgc2VsZi5yZW1vdmVUb2RvID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICBzZWxmLnRvZG9zLnNwbGljZShzZWxmLmdldEJ5SWQoaWQpLCAxKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KHNlbGYudG9kb3MpKTtcclxuICB9O1xyXG5cclxuICBzZWxmLmFkZFRvZG8gPSBmdW5jdGlvbiAodG9kb1RleHQpIHtcclxuICAgIHZhciB0bXAgPSBudWxsO1xyXG4gICAgaWYgKHNlbGYudG9kb3MubGVuZ3RoID4gMCkge1xyXG4gICAgICB0bXAgPSBzZWxmLnRvZG9zW3NlbGYudG9kb3MubGVuZ3RoIC0gMV0uaWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0bXAgPSAtMTtcclxuICAgIH1cclxuICAgIHNlbGYudG9kb3MucHVzaCh7XHJcbiAgICAgIGlkOiB0bXAgKz0gMSxcclxuICAgICAgdGV4dDogdG9kb1RleHQsXHJcbiAgICAgIGRvbmU6IGZhbHNlXHJcbiAgICB9KTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KHNlbGYudG9kb3MpKTtcclxuICB9O1xyXG5cclxuICBzZWxmLmVkaXRUb2RvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG9zJywgSlNPTi5zdHJpbmdpZnkoc2VsZi50b2RvcykpO1xyXG4gIH07XHJcbn1cbn0oKSk7XG5cbjsoZnVuY3Rpb24oKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhclxyXG4gIC5tb2R1bGUoJ3RvZG9BcHAuY29tcG9uZW50cycpXHJcbiAgLmRpcmVjdGl2ZSgnZHJhZycsIGRyYWcpO1xyXG5cclxuZnVuY3Rpb24gZHJhZygpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICBsaW5rOiBsaW5rXHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWxDdHJsKSB7XHJcbiAgICB2YXIgcHJvY2Vzc0RyYWdPdmVyT3JFbnRlcjtcclxuXHJcbiAgICBwcm9jZXNzRHJhZ092ZXJPckVudGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGlmIChldmVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnY29weSc7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgZWxlbWVudC5iaW5kKCdkcmFnb3ZlcicsIHByb2Nlc3NEcmFnT3Zlck9yRW50ZXIpO1xyXG4gICAgZWxlbWVudC5iaW5kKCdkcmFnZW50ZXInLCBwcm9jZXNzRHJhZ092ZXJPckVudGVyKTtcclxuICAgIGVsZW1lbnQuYmluZCgnZHJvcCcsIGhhbmRsZURyb3BFdmVudCk7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5zZXJ0VGV4dChsb2FkZWRGaWxlKSB7XHJcbiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUobG9hZGVkRmlsZS50YXJnZXQucmVzdWx0KTtcclxuICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZURyb3BFdmVudChldmVudCkge1xyXG4gICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgaWYgKGV2ZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICAgICByZWFkZXIub25sb2FkID0gaW5zZXJ0VGV4dDtcclxuICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzWzBdKTtcclxuICAgIH1cclxuICB9XHJcbn1cbn0oKSk7XG5cbjsoZnVuY3Rpb24oKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoJ3RvZG9BcHAuY29tcG9uZW50cycpXHJcbiAgLmNvbXBvbmVudCgnY3JlYXRlJywge1xyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgdG9kb3M6ICc8J1xyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9jcmVhdGUvdG9kby1jcmVhdGUuaHRtbCcsXHJcbiAgICBjb250cm9sbGVyOiBUb2RvQ3JlYXRlQ29udHJvbGxlclxyXG4gIH0pO1xyXG5cclxuZnVuY3Rpb24gVG9kb0NyZWF0ZUNvbnRyb2xsZXIoJHN0YXRlLCBUb0RvU2VydmljZSkge1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuICBzZWxmLmFkZFRvZG8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBUb0RvU2VydmljZS5hZGRUb2RvKHNlbGYudG9kb1RleHQpO1xyXG4gICAgJHN0YXRlLmdvKCd0b2RvcycpO1xyXG4gIH07XHJcbn1cbn0oKSk7XG5cbjsoZnVuY3Rpb24oKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoJ3RvZG9BcHAuY29tcG9uZW50cycpXHJcbiAgLmNvbXBvbmVudCgnZWRpdCcsIHtcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgIHRvZG86ICc8J1xyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9lZGl0L3RvZG8tZWRpdC5odG1sJyxcclxuICAgIGNvbnRyb2xsZXI6IFRvZG9FZGl0Q29udHJvbGxlclxyXG4gIH0pO1xyXG5cclxuZnVuY3Rpb24gVG9kb0VkaXRDb250cm9sbGVyKCRzdGF0ZSwgVG9Eb1NlcnZpY2UpIHtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gIHNlbGYuZWRpdFRvZG8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBUb0RvU2VydmljZS5lZGl0VG9kbygpO1xyXG4gICAgJHN0YXRlLmdvKCd0b2RvcycpO1xyXG4gIH07XHJcbn1cbn0oKSk7XG5cbjsoZnVuY3Rpb24oKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoJ3RvZG9BcHAuY29tcG9uZW50cycpXHJcbiAgLmNvbXBvbmVudCgnZm9vdGVyJywge1xyXG4gICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2Zvb3Rlci9mb290ZXIuaHRtbCcsXHJcbiAgICBjb250cm9sbGVyOiBUb2RvRm9vdGVyXHJcbiAgfSk7XHJcblxyXG5mdW5jdGlvbiBUb2RvRm9vdGVyKCkge1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgc2VsZi5kYXRlID0gRGF0ZS5ub3coKTtcclxufVxufSgpKTtcblxuOyhmdW5jdGlvbigpIHtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZSgndG9kb0FwcC5jb21wb25lbnRzJylcbiAgLmNvbXBvbmVudCgndG9kb3MnLCB7XG4gICAgYmluZGluZ3M6IHtcbiAgICAgIHRvZG9zOiAnPCdcbiAgICB9LFxuICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9saXN0L3RvZG8tbGlzdC5odG1sJyxcbiAgICBjb250cm9sbGVyOiBUb2RvTGlzdENvbnRyb2xsZXJcbiAgfSk7XG5cbmZ1bmN0aW9uIFRvZG9MaXN0Q29udHJvbGxlcihUb0RvU2VydmljZSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgc2VsZi5hcHBUaXRsZSA9IFRvRG9TZXJ2aWNlLmFwcFRpdGxlO1xuXG4gIHNlbGYucmVtb3ZlVG9kbyA9IGZ1bmN0aW9uIChpZCkge1xuICAgIFRvRG9TZXJ2aWNlLnJlbW92ZVRvZG8oaWQpO1xuICB9O1xuXG4gIHNlbGYucmVtYWluaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBUb0RvU2VydmljZS5yZW1haW5pbmcoKTtcbiAgfTtcblxuICBzZWxmLmFyY2hpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgVG9Eb1NlcnZpY2UuYXJjaGl2ZSgpO1xuICAgIHNlbGYudG9kb3MgPSBUb0RvU2VydmljZS5nZXRUb2RvcygpO1xuICB9O1xufVxufSgpKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd0b2RvQXBwLmNvbXBvbmVudHMnLCBbXSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCd0b2RvQXBwLnNlcnZpY2VzJywgW10pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgndG9kb0FwcC5zZXJ2aWNlcycpXHJcbiAgICAuc2VydmljZSgnVG9Eb1NlcnZpY2UnLCBUb0RvU2VydmljZSk7XHJcblxyXG5mdW5jdGlvbiBUb0RvU2VydmljZSgpIHtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gIHNlbGYuYXBwVGl0bGUgPSAnRG8gb3IgZG8gbm90LCB0aGVyZSBpcyBubyB0cnknO1xyXG4gIHNlbGYuc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9kb3MnKTtcclxuICBzZWxmLnRvZG9zID0gKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvcycpICE9PSBudWxsKSA/IEpTT04ucGFyc2Uoc2VsZi5zYXZlZCkgOlxyXG4gICAgW3sgaWQ6IDAsIHRleHQ6ICdMZWFybiBBbmd1bGFySlMnLCBkb25lOiBmYWxzZSB9LFxyXG4gICAgeyBpZDogMSwgdGV4dDogJ0J1aWxkIGFuIEFuZ3VsYXIgYXBwJywgZG9uZTogZmFsc2UgfV07XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG9zJywgSlNPTi5zdHJpbmdpZnkoc2VsZi50b2RvcykpO1xyXG5cclxuICBzZWxmLmdldFRvZG9zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHNlbGYudG9kb3M7XHJcbiAgfTtcclxuXHJcbiAgc2VsZi5maW5kID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICB2YXIgdG9kbyA9IHNlbGYudG9kb3MuZmlsdGVyKGZ1bmN0aW9uICh0b0RvKSB7XHJcbiAgICAgIHJldHVybiB0b0RvLmlkID09PSBwYXJzZUludChpZCwgMTApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICh0b2RvICYmIHRvZG9bMF0pIHx8IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgc2VsZi5nZXRCeUlkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLnRvZG9zXHJcbiAgICAgIC5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuIGVsZW1lbnQuaWQ7IH0pXHJcbiAgICAgIC5pbmRleE9mKGlkKTtcclxuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH07XHJcblxyXG4gIHNlbGYuZ2V0VW5EbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHNlbGYudG9kb3MgPSBzZWxmLnRvZG9zLmZpbHRlcihmdW5jdGlvbiAodG9kbykge1xyXG4gICAgICByZXR1cm4gdG9kby5kb25lICE9PSB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc2VsZi50b2RvcztcclxuICB9O1xyXG5cclxuICBzZWxmLnJlbWFpbmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICBhbmd1bGFyLmZvckVhY2goc2VsZi50b2RvcywgZnVuY3Rpb24gKHRvZG8pIHtcclxuICAgICAgY291bnQgKz0gdG9kby5kb25lID8gMCA6IDE7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBjb3VudDtcclxuICB9O1xyXG5cclxuICBzZWxmLmFyY2hpdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCBKU09OLnN0cmluZ2lmeShzZWxmLmdldFVuRG8oKSkpO1xyXG4gIH07XHJcblxyXG4gIHNlbGYucmVtb3ZlVG9kbyA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgc2VsZi50b2Rvcy5zcGxpY2Uoc2VsZi5nZXRCeUlkKGlkKSwgMSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCBKU09OLnN0cmluZ2lmeShzZWxmLnRvZG9zKSk7XHJcbiAgfTtcclxuXHJcbiAgc2VsZi5hZGRUb2RvID0gZnVuY3Rpb24gKHRvZG9UZXh0KSB7XHJcbiAgICB2YXIgdG1wID0gbnVsbDtcclxuICAgIGlmIChzZWxmLnRvZG9zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdG1wID0gc2VsZi50b2Rvc1tzZWxmLnRvZG9zLmxlbmd0aCAtIDFdLmlkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdG1wID0gLTE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnRvZG9zLnB1c2goe1xyXG4gICAgICBpZDogdG1wICs9IDEsXHJcbiAgICAgIHRleHQ6IHRvZG9UZXh0LFxyXG4gICAgICBkb25lOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCBKU09OLnN0cmluZ2lmeShzZWxmLnRvZG9zKSk7XHJcbiAgfTtcclxuXHJcbiAgc2VsZi5lZGl0VG9kbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KHNlbGYudG9kb3MpKTtcclxuICB9O1xyXG59XHJcbiIsImFuZ3VsYXJcclxuICAubW9kdWxlKCd0b2RvQXBwLmNvbXBvbmVudHMnKVxyXG4gIC5kaXJlY3RpdmUoJ2RyYWcnLCBkcmFnKTtcclxuXHJcbmZ1bmN0aW9uIGRyYWcoKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgbGluazogbGlua1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsQ3RybCkge1xyXG4gICAgdmFyIHByb2Nlc3NEcmFnT3Zlck9yRW50ZXI7XHJcblxyXG4gICAgcHJvY2Vzc0RyYWdPdmVyT3JFbnRlciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBpZiAoZXZlbnQgIT09IG51bGwpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ2NvcHknO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIGVsZW1lbnQuYmluZCgnZHJhZ292ZXInLCBwcm9jZXNzRHJhZ092ZXJPckVudGVyKTtcclxuICAgIGVsZW1lbnQuYmluZCgnZHJhZ2VudGVyJywgcHJvY2Vzc0RyYWdPdmVyT3JFbnRlcik7XHJcbiAgICBlbGVtZW50LmJpbmQoJ2Ryb3AnLCBoYW5kbGVEcm9wRXZlbnQpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGluc2VydFRleHQobG9hZGVkRmlsZSkge1xyXG4gICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKGxvYWRlZEZpbGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVEcm9wRXZlbnQoZXZlbnQpIHtcclxuICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgIGlmIChldmVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgICAgcmVhZGVyLm9ubG9hZCA9IGluc2VydFRleHQ7XHJcbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlc1swXSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImFuZ3VsYXIubW9kdWxlKCd0b2RvQXBwLmNvbXBvbmVudHMnKVxyXG4gIC5jb21wb25lbnQoJ2NyZWF0ZScsIHtcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgIHRvZG9zOiAnPCdcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvY3JlYXRlL3RvZG8tY3JlYXRlLmh0bWwnLFxyXG4gICAgY29udHJvbGxlcjogVG9kb0NyZWF0ZUNvbnRyb2xsZXJcclxuICB9KTtcclxuXHJcbmZ1bmN0aW9uIFRvZG9DcmVhdGVDb250cm9sbGVyKCRzdGF0ZSwgVG9Eb1NlcnZpY2UpIHtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgc2VsZi5hZGRUb2RvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgVG9Eb1NlcnZpY2UuYWRkVG9kbyhzZWxmLnRvZG9UZXh0KTtcclxuICAgICRzdGF0ZS5nbygndG9kb3MnKTtcclxuICB9O1xyXG59XHJcbiIsImFuZ3VsYXIubW9kdWxlKCd0b2RvQXBwLmNvbXBvbmVudHMnKVxyXG4gIC5jb21wb25lbnQoJ2VkaXQnLCB7XHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICB0b2RvOiAnPCdcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvZWRpdC90b2RvLWVkaXQuaHRtbCcsXHJcbiAgICBjb250cm9sbGVyOiBUb2RvRWRpdENvbnRyb2xsZXJcclxuICB9KTtcclxuXHJcbmZ1bmN0aW9uIFRvZG9FZGl0Q29udHJvbGxlcigkc3RhdGUsIFRvRG9TZXJ2aWNlKSB7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICBzZWxmLmVkaXRUb2RvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgVG9Eb1NlcnZpY2UuZWRpdFRvZG8oKTtcclxuICAgICRzdGF0ZS5nbygndG9kb3MnKTtcclxuICB9O1xyXG59XHJcbiIsImFuZ3VsYXIubW9kdWxlKCd0b2RvQXBwLmNvbXBvbmVudHMnKVxyXG4gIC5jb21wb25lbnQoJ2Zvb3RlcicsIHtcclxuICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9mb290ZXIvZm9vdGVyLmh0bWwnLFxyXG4gICAgY29udHJvbGxlcjogVG9kb0Zvb3RlclxyXG4gIH0pO1xyXG5cclxuZnVuY3Rpb24gVG9kb0Zvb3RlcigpIHtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gIHNlbGYuZGF0ZSA9IERhdGUubm93KCk7XHJcbn1cclxuIiwiYW5ndWxhci5tb2R1bGUoJ3RvZG9BcHAuY29tcG9uZW50cycpXG4gIC5jb21wb25lbnQoJ3RvZG9zJywge1xuICAgIGJpbmRpbmdzOiB7XG4gICAgICB0b2RvczogJzwnXG4gICAgfSxcbiAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvbGlzdC90b2RvLWxpc3QuaHRtbCcsXG4gICAgY29udHJvbGxlcjogVG9kb0xpc3RDb250cm9sbGVyXG4gIH0pO1xuXG5mdW5jdGlvbiBUb2RvTGlzdENvbnRyb2xsZXIoVG9Eb1NlcnZpY2UpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHNlbGYuYXBwVGl0bGUgPSBUb0RvU2VydmljZS5hcHBUaXRsZTtcblxuICBzZWxmLnJlbW92ZVRvZG8gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICBUb0RvU2VydmljZS5yZW1vdmVUb2RvKGlkKTtcbiAgfTtcblxuICBzZWxmLnJlbWFpbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gVG9Eb1NlcnZpY2UucmVtYWluaW5nKCk7XG4gIH07XG5cbiAgc2VsZi5hcmNoaXZlID0gZnVuY3Rpb24gKCkge1xuICAgIFRvRG9TZXJ2aWNlLmFyY2hpdmUoKTtcbiAgICBzZWxmLnRvZG9zID0gVG9Eb1NlcnZpY2UuZ2V0VG9kb3MoKTtcbiAgfTtcbn1cbiJdfQ==
